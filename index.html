<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>CVC 聲音辨認遊戲（純文字）</title>
<style>
  body { font-family: Arial; text-align: center; background: #f0f8ff; }
  button { font-size: 48px; padding: 20px 40px; margin: 20px; cursor: pointer; 
           background-color: #d3d3d3; color: black; border: none; border-radius: 12px; transition: 0.2s; }
  button.selected { background-color: #1E90FF; color: white; }
  #score, #feedback { font-size: 36px; margin-top: 25px; }
</style>
</head>
<body>
<h1 style="font-size:64px;">CVC 聲音辨認遊戲</h1>
<p style="font-size:32px;">聽音並選出正確單字</p>
<div id="options"></div>
<div id="feedback"></div>
<div id="score">分數：0</div>

<script>
// 題庫 50 個以上 CVC 單字
const words = [
  "cat","dog","rat","bat","hat","sun","pig","map","cup","fox",
  "hen","jam","kid","log","man","net","pan","pen","pot","red",
  "run","sip","sit","tap","top","tan","web","wax","win","wig",
  "yak","yes","yap","zip","zoo","cab","dad","bed","jet","mob",
  "nod","pad","tip","van","wet","fat","fun","bag","cap","dig"
];

let score = 0;
let correctWord = null;

function shuffle(array) { return array.sort(() => Math.random() - 0.5); }

function playSound() {
  const shuffled = shuffle(words);
  correctWord = shuffled[0];

  // 題目出現時自動播放聲音
  const audio = new Audio(`https://translate.google.com/translate_tts?ie=UTF-8&q=${correctWord}&tl=en&client=tw-ob`);
  audio.play();

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  // 隨機選三個選項
  let choices = shuffle(words.slice(0, 3));
  if (!choices.includes(correctWord)) choices[0] = correctWord;
  choices = shuffle(choices);

  choices.forEach(item => {
    const btn = document.createElement("button");
    btn.innerText = item;
    btn.onclick = () => checkAnswer(btn, item);
    optionsDiv.appendChild(btn);
  });

  document.getElementById("feedback").innerText = "";
}

function checkAnswer(btn, item) {
  // 點選後將所有按鈕恢復灰底
  document.querySelectorAll("button").forEach(b => b.classList.remove("selected"));

  // 點選按鈕變藍底
  btn.classList.add("selected");

  const feedback = document.getElementById("feedback");
  if (item === correctWord) {
    score++;
    feedback.innerText = "✅ 答對了！";
  } else {
    feedback.innerText = `❌ 答錯了！正確答案是 "${correctWord}"`;
  }
  document.getElementById("score").innerText = "分數：" + score;
}
  
// 初始自動出題
playSound();
</script>
</body>
</html>
