<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>CVC è²éŸ³è¾¨èªéŠæˆ²ï¼ˆå†æ¬¡è½ + ç½®ä¸­æ–‡å­—ï¼‰</title>
<style>
  body { font-family: Arial; text-align: center; background: #f0f8ff; }
  button { 
    font-size: 64px;           /* å­—é«”å¤§ */
    padding: 40px 20px;        /* ä¸Šä¸‹ç•™ç™½å¤§ */
    margin: 20px; 
    cursor: pointer; 
    background-color: #d3d3d3; 
    color: black; 
    border: none; 
    border-radius: 16px; 
    transition: 0.2s; 
    display: block; 
    width: 80%;                /* æ‰‹æ©Ÿæ©«å‘ä¹Ÿå¥½é» */
    line-height: 1.5em;        /* ä¸‰è¡Œé«˜åº¦ */
    word-break: break-word;     
    text-align: center;         /* æ–‡å­—ç½®ä¸­ */
  }
  button.selected { background-color: #1E90FF; color: white; }
  #score, #feedback { font-size: 36px; margin-top: 25px; }
  #restart, #replay { 
    font-size: 36px; 
    padding: 20px 40px; 
    border-radius: 16px; 
    margin: 10px; 
  }
  #restart { background-color: #FF6347; color: white; }
  #restart:hover { background-color: #FF4500; }
  #replay { background-color: #32CD32; color: white; }
  #replay:hover { background-color: #228B22; }
</style>
</head>
<body>
<h1 style="font-size:72px;">CVC è²éŸ³è¾¨èªéŠæˆ²</h1>
<p style="font-size:36px;">è½éŸ³ä¸¦é¸å‡ºæ­£ç¢ºå–®å­—</p>
<div id="options"></div>
<div id="feedback"></div>
<div id="score">åˆ†æ•¸ï¼š0</div>

<button id="replay" onclick="replayWord()">å†æ¬¡è½ ğŸ”Š</button>
<button id="restart" onclick="restartGame()">é‡æ–°é–‹å§‹ ğŸ”„</button>

<script>
// é¡Œåº« 50 å€‹ä»¥ä¸Š CVC å–®å­—
const words = [
  "cat","dog","rat","bat","hat","sun","pig","map","cup","fox",
  "hen","jam","kid","log","man","net","pan","pen","pot","red",
  "run","sip","sit","tap","top","tan","web","wax","win","wig",
  "yak","yes","yap","zip","zoo","cab","dad","bed","jet","mob",
  "nod","pad","tip","van","wet","fat","fun","bag","cap","dig"
];

let score = 0;
let correctWord = null;

function shuffle(array) { return array.sort(() => Math.random() - 0.5); }

// ä½¿ç”¨ç€è¦½å™¨ TTS æ’­æ”¾å–®å­—
function speak(word) {
  const utterance = new SpeechSynthesisUtterance(word);
  utterance.lang = "en-US";
  speechSynthesis.speak(utterance);
}

// é¡Œç›®ç”Ÿæˆ
function playSound() {
  const shuffled = shuffle(words);
  correctWord = shuffled[0];

  // è‡ªå‹•æ’­æ”¾å–®å­—
  speak(correctWord);

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  // éš¨æ©Ÿé¸ä¸‰å€‹é¸é …
  let choices = shuffle(words.slice(0, 3));
  if (!choices.includes(correctWord)) choices[0] = correctWord;
  choices = shuffle(choices);

  choices.forEach(item => {
    const btn = document.createElement("button");
    btn.innerText = item;
    btn.onclick = () => checkAnswer(btn, item);
    optionsDiv.appendChild(btn);
  });

  document.getElementById("feedback").innerText = "";
}

// å†æ¬¡è½æŒ‰éˆ•
function replayWord() {
  if (correctWord) speak(correctWord);
}

function checkAnswer(btn, item) {
  // é»é¸å¾Œå°‡æ‰€æœ‰æŒ‰éˆ•æ¢å¾©ç°åº•
  document.querySelectorAll("button").forEach(b => b.classList.remove("selected"));

  // é»é¸æŒ‰éˆ•è®Šè—åº•
  btn.classList.add("selected");

  const feedback = document.getElementById("feedback");
  if (item === correctWord) {
    score++;
    feedback.innerText = "âœ… ç­”å°äº†ï¼";
  } else {
    feedback.innerText = `âŒ ç­”éŒ¯äº†ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ "${correctWord}"`;
  }
  document.getElementById("score").innerText = "åˆ†æ•¸ï¼š" + score;

  // 1 ç§’å¾Œè‡ªå‹•å‡ºä¸‹ä¸€é¡Œ
  setTimeout(playSound, 1000);
}

// é‡æ–°é–‹å§‹éŠæˆ²
function restartGame() {
  score = 0;
  document.getElementById("score").innerText = "åˆ†æ•¸ï¼š0";
  document.getElementById("feedback").innerText = "";
  playSound();
}

// åˆå§‹è‡ªå‹•å‡ºé¡Œ
playSound();
</script>
</body>
</html>
